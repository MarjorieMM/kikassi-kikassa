{% extends './admin/base-admin.html.twig' %}
{% import './admin/_macros.html.twig' as macros %}


{% set envoi = "<div class='d-block envoi'>" ~ form_widget(form.save, {'label' : '<div class="btn-text p-1 px-2">Valider les <br> informations<div>'}) ~ "</div>" %}
{% set continue = "" %}
{% set arrowClass = 'd-none' %}
{% set footerPadding = 's-padding' %}

{% block title %}Adhérents
{% endblock %}

{% set adminSel = '' %}

{% set valuePaie = adherent.moyenpaiement %}
{% set valueCotis = adherent.etatcotisation %}
{% if adherent.adhesionBibliotheque is not null %}
	{% set biblio = adherent.adhesionbibliotheque %}
	{% set valueFourmi  = biblio.categoriefourmi %}
	{% set valueId  = biblio.justifidentite ? 1 : 0 %}
	{% set valueDom  = biblio.justifdomicile ? 1 : 0 %}
	{% set biblioClass = 'd-none'%}

	{% if "ROLE_ADMIN" in biblio.roles %}
		{% set adminSel = 'oui' %}
	{% else %}
		{% set adminSel = 'non' %}
	{% endif %}

{% endif %}

{% block body %}
	<body class={{color}}>
		{{ form_start(form, {'attr': {'autocomplete' : 'off', 'novalidate' : true, 'class' : submitted ? submitted : "" }})}}
		<div class="main-title font-raleway">
			<h1 class="first-part text-center font-raleway mb-5">Editer les informations
				<br>
				de :
				{{adherent.prenom}}
				{{adherent.nom}}
			</h1>
			<div class="container">
				{% set formErrors = form.vars.errors.form.getErrors(true) %}
				{% if formErrors|length %}
					<ul class="text-center list-group mb-1">
						<li class="list-group-item list-group-item-danger my-1">Formulaire non valide :</li>
						{% for error in formErrors %}
							<li class="list-group-item list-group-item-danger my-1">{{ error.message }}</li>
						{% endfor %}
					</ul>
				{% endif %}
			</div>
			<div class="container">

				<div class="row">
					<div class="col">
						<div class="form-group">
							{{ form_label(form.nom) }}
							{{ form_widget(form.nom, {'attr': {'class': 'form-control p-4'}}) }}
						</div>
					</div>
					<div class="col">
						<div class="form-group">
							{{ form_label(form.prenom) }}
							{{ form_widget(form.prenom, {'attr': {'class': 'form-control p-4'}}) }}
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col">
						<div class="form-group">
							{{ form_label(form.date_naissance) }}
							{{ form_widget(form.date_naissance, {'attr': {'class': 'form-control p-4'}}) }}
						</div>
					</div>
					<div class="col">
						<div class="form-group">
							{{ form_label(form.lieu_naissance) }}
							{{ form_widget(form.lieu_naissance, {'attr': {'class': 'form-control p-4'}}) }}
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col">
						<div class="form-group">
							{{ form_label(form.adresse) }}
							{{ form_widget(form.adresse, {'attr': {'class': 'form-control p-4'}}) }}
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col">
						<div class="form-group">
							{{ form_label(form.cp) }}
							{{ form_widget(form.cp, {'attr': {'class': 'form-control p-4'}}) }}
						</div>
					</div>
					<div class="col">
						<div class="form-group">
							{{ form_label(form.ville) }}
							{{ form_widget(form.ville, {'attr': {'class': 'form-control p-4'}}) }}
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col">
						<div class="form-group">
							{{ form_label(form.telephone) }}
							{{ form_widget(form.telephone, {'attr': {'class': 'form-control p-4'}}) }}
						</div>
					</div>
					<div class="col">
						<div class="form-group">
							{{ form_label(form.email) }}
							{{ form_widget(form.email, {'attr': {'class': 'form-control p-4'}}) }}
							<p class="email-obligatoire d-none text-danger">Adresse email obligatoire pour l'inscription à la bibliothèque</p>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col">
						<div class="form-group">
							{{ form_label(form.montant_cotisation) }}
							{{ form_widget(form.montant_cotisation, {'attr': {'class': 'form-control select-height'}
							}) }}
						</div>
					</div>
					<div class="col">
						<div class="form-group">
							{{ form_label(form.moyen_paiement) }}
							{{ form_widget(form.moyen_paiement, {'attr': {'class': 'form-control select-height'}, value : valuePaie|lower
							}) }}
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col">
						<div class="form-group">
							{{ form_label(form.etat_cotisation) }}
							{{ form_widget(form.etat_cotisation, {'attr': {'class': 'form-control select-height'}, value : valueCotis|lower }) }}
						</div>
					</div>
					{% if adherent.adhesionBibliotheque is not null %}
						<div class="col">
							<div class="form-group biblio-select-edit">
								<label for="biblio">Inscription à la bibliothèque</label>
								<select type="radio" name="biblio" class="biblio form-control select-height" required disabled>
									<option value="">Inscription à la bibliothèque</option>
									<option value="oui" selected>Oui</option>
									<option value="non">Non</option>
								</select>
							</div>
						</div>
					{% else %}
						<div class="col">
							<div class="form-group biblio-select-edit">
								<label for="biblio">Inscription à la bibliothèque</label>
								<select type="radio" name="biblio" class="biblio form-control select-height" required>
									<option value="">Inscription à la bibliothèque</option>
									<option value="oui">Oui</option>
									<option value="non">Non</option>
								</select>
							</div>
						</div>
					{% endif %}
				</div>
				{% if adherent.adhesionBibliotheque is not null %}
					<div class="row">
						<div class="col">
							<div class="form-group">
								{{ form_label(formBiblio.categorie_fourmi) }}
								{{ form_widget(formBiblio.categorie_fourmi,  {'attr': {'class': 'form-control select-height'}, value : valueFourmi|lower}) }}
							</div>
						</div>
						<div class="col">
							<div class="form-group">
								{{ form_label(formBiblio.depot_permanent) }}
								{{ form_widget(formBiblio.depot_permanent, {'attr': {'class': 'form-control select-height'}}) }}
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col">
							<div class="form-group">
								{{ form_label(formBiblio.fin_rc) }}
								{{ form_widget(formBiblio.fin_rc, {'attr': {'class': 'form-control p-4'}}) }}
							</div>
						</div>
						<div class="col">
							<div class="form-group admin-select">
								<label for="admin">Possède des droits admin</label>
								<select type="radio" name="admin" class="admin form-control select-height" required>
									<option value='oui' {{adminSel == 'oui' ? "selected" : ""}}>Oui</option>
									<option value='non' {{adminSel == 'non' ? "selected" : ""}}>Non</option>
								</select>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col">
							<div class="form-group">
								{{ form_label(formBiblio.justif_identite) }}
								{{ form_widget(formBiblio.justif_identite, {'attr': {'class': 'form-control select-height'}, value : valueId|lower}) }}
							</div>
						</div>
						<div class="col">
							<div class="form-group">
								{{ form_label(formBiblio.justif_domicile) }}
								{{ form_widget(formBiblio.justif_domicile, {'attr': {'class': 'form-control select-height'}, value : valueDom|lower}) }}
							</div>
						</div>
					</div>
				{% else %}
					<div class=" biblio-part d-none">
						<div class="row biblio-part d-none">
							<div class="col">
								<div class="form-group">
									{{ form_label(formBiblio.categorie_fourmi) }}
									{{ form_widget(formBiblio.categorie_fourmi,  {'attr': {'class': 'form-control select-height'}}) }}
								</div>
							</div>
							<div class="col">
								<div class="form-group">
									{{ form_label(formBiblio.depot_permanent) }}
									{{ form_widget(formBiblio.depot_permanent, {'attr': {'class': 'form-control select-height'}}) }}
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="form-group">
									{{ form_label(formBiblio.fin_rc) }}
									{{ form_widget(formBiblio.fin_rc, {'attr': {'class': 'form-control p-4'}}) }}
								</div>
							</div>
							<div class="col">
								<div class="form-group admin-select">
									<label for="admin">Possède des droits admin</label>
									<select type="radio" name="admin" class="admin form-control select-height" required>
										<option value=''>Accorder des droits admin</option>
										<option value='oui'>Oui</option>
										<option value='non'>Non</option>
									</select>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="form-group">
									{{ form_label(formBiblio.justif_identite) }}
									{{ form_widget(formBiblio.justif_identite, {'attr': {'class': 'form-control select-height'}}) }}
								</div>
							</div>
							<div class="col">
								<div class="form-group">
									{{ form_label(formBiblio.justif_domicile) }}
									{{ form_widget(formBiblio.justif_domicile, {'attr': {'class': 'form-control select-height'}}) }}
								</div>
							</div>
						</div>
					</div>
				{% endif %}
				{# <div class="col">
																																						<div class="form-group">
																																						{{ form_label(form.compte_actif) }}
																																							{{ form_widget(form.compte_actif, {'attr': {'class': 'form-control select-height'}}) }}
																																						</div>
																																					</div> #}
				{# <div class="col">
																																						<div class="form-group actif-select">
																																							<select type="radio" name="actif" class="actif form-control select-height" required>
																																								<option value="">Compte actif</option>
																																								<option value="oui">Oui</option>
																																								<option value="non">Non</option>
																																							</select>
																																						</div>
																																					</div> #}
			</div>
		</div>
	</body>
</div>
{{macros.footer_color(section, return_path, arrow, envoi, continue, arrowClass, footerPadding )}}
{{ form_end(form)}}</body>{% endblock %}{% block footer %}{% endblock %}{# <div class="col">
														<div class="form-group biblio-select">
															<select type="radio" name="biblio" class="biblio form-control select-height" required>
																<option value="">Inscription à la bibliothèque</option>
																<option value="oui">Oui</option>
																<option value="non">Non</option>
															</select>
														</div>
													</div> #}
